â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    âœ… SOLUTION RADICALE APPLIQUÃ‰E
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Date: 7 FÃ©vrier 2026 - 12:00 UTC

ğŸ¯ TON PROBLÃˆME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Les durÃ©es affichaient 00:00:00 car le composant d'upload envoyait
duration_ms: 0 Ã  la base de donnÃ©es (pas de calcul AVANT l'envoi).

ğŸ”§ SOLUTION APPLIQUÃ‰E
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

J'ai ajoutÃ© la fonction handleFileUpload() avec l'algorithme EXACT
que tu as demandÃ© :

1. CrÃ©ation d'un Ã©lÃ©ment vidÃ©o temporaire
   const tempElement = document.createElement('video');

2. Chargement du fichier dedans
   tempElement.src = URL.createObjectURL(file);

3. Attente des mÃ©tadonnÃ©es
   tempElement.onloadedmetadata = () => {
     const realDuration = Math.round(tempElement.duration * 1000);
     // C'est ICI que la durÃ©e est extraite
   };

4. Upload APRÃˆS extraction de durÃ©e
   - Upload vers Supabase Storage
   - Formulaire mis Ã  jour avec duration_ms

5. Enregistrement avec la bonne durÃ©e

ğŸ“‹ FICHIER MODIFIÃ‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

app/playout/library/page.tsx

AJOUTS:
- Ligne ~255: Fonction handleFileUpload()
- Ligne ~751: Champ <input type="file" accept="video/*,audio/*">
- Ligne ~755: SÃ©parateur "OU"
- Ligne ~760: Champ URL (modifiÃ©, plus "requis")

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¬ COMMENT Ã‡A MARCHE MAINTENANT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPTION A: Upload de fichier local
  1. Clique sur "Ajouter un mÃ©dia"
  2. Clique sur "Choisir un fichier"
  3. SÃ©lectionne une vidÃ©o/audio
  4. La durÃ©e est extraite automatiquement
  5. Le fichier est uploadÃ© vers Supabase
  6. Le formulaire affiche la durÃ©e
  7. Clique sur "Enregistrer"
  8. La durÃ©e est CORRECTE dans la base

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ CLIQUE SUR "PUBLISH" MAINTENANT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Le code respecte EXACTEMENT ton algorithme:
- document.createElement('video') âœ…
- tempElement.onloadedmetadata âœ…
- Math.round(tempElement.duration * 1000) âœ…
- Upload APRÃˆS extraction durÃ©e âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
