â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“ DIFF EXACT DES MODIFICATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FICHIER 1: components/WhatsAppChat.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

LIGNE 60 (Card z-index):
AVANT:  <Card className="fixed bottom-24 left-6 w-80 shadow-2xl z-40 animate-in slide-in-from-bottom-4">
APRÃˆS:  <Card className="fixed bottom-24 left-6 w-80 shadow-2xl z-[99999] animate-in slide-in-from-bottom-4">
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                                       z-40 â†’ z-[99999]

LIGNE 94 (Button z-index):
AVANT:  className="fixed bottom-6 left-6 h-14 w-14 rounded-full shadow-2xl bg-green-600 hover:bg-green-700 z-50 transition-transform hover:scale-110"
APRÃˆS:  className="fixed bottom-6 left-6 h-14 w-14 rounded-full shadow-2xl bg-green-600 hover:bg-green-700 z-[100000] transition-transform hover:scale-110"
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                                                                                          z-50 â†’ z-[100000]


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FICHIER 2: components/PlayoutMediaLibrary.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

AJOUT APRÃˆS LIGNE 318 (fonction formatDuration):

  // Force l'attente des mÃ©tadonnÃ©es AVANT de remplir le champ
  const loadVideoDuration = (file: File): Promise<number> => {
    return new Promise((resolve) => {
      const video = document.createElement('video');
      video.preload = 'metadata';
      video.onloadedmetadata = () => {
        window.URL.revokeObjectURL(video.src);
        const durationInSeconds = Math.floor(video.duration);
        resolve(durationInSeconds);
      };
      video.onerror = () => {
        console.warn('Impossible de charger les mÃ©tadonnÃ©es de la vidÃ©o');
        resolve(0);
      };
      video.src = URL.createObjectURL(file);
    });
  };

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

LIGNE 387-398 (onChange du file input):

AVANT:
                  <Input
                    type="file"
                    accept="video/*,audio/*"
                    onChange={(e) => {
                      const file = e.target.files?.[0];
                      if (file) {
                        setSelectedFile(file);
                        if (!formData.title) {
                          setFormData({ ...formData, title: file.name.replace(/\.[^/.]+$/, '') });
                        }
                      }
                    }}
                    disabled={uploadingFile}
                  />

APRÃˆS:
                  <Input
                    type="file"
                    accept="video/*,audio/*"
                    onChange={async (e) => {
                      const file = e.target.files?.[0];
                      if (file) {
                        setSelectedFile(file);

                        // Remplir le titre si vide
                        if (!formData.title) {
                          setFormData({ ...formData, title: file.name.replace(/\.[^/.]+$/, '') });
                        }

                        // DÃ©tecter automatiquement la durÃ©e pour les vidÃ©os
                        if (file.type.startsWith('video/')) {
                          toast.info('DÃ©tection de la durÃ©e en cours...');
                          const durationInSeconds = await loadVideoDuration(file);

                          if (durationInSeconds > 0) {
                            setFormData(prev => ({
                              ...prev,
                              duration_seconds: durationInSeconds
                            }));
                            toast.success(`âœ… DurÃ©e dÃ©tectÃ©e: ${formatDuration(durationInSeconds)}`);
                          } else {
                            toast.warning('âš ï¸ DurÃ©e non dÃ©tectÃ©e. Vous pouvez la saisir manuellement.');
                          }
                        }
                      }
                    }}
                    disabled={uploadingFile}
                  />

CHANGEMENTS:
  1. onChange={(e) => {  â†’  onChange={async (e) => {
  2. Ajout dÃ©tection automatique durÃ©e (lignes 417-431)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

LIGNE 442-449 (Label du champ durÃ©e):

AVANT:
              <div>
                <Label>DurÃ©e (secondes)</Label>
                <Input
                  type="number"
                  value={formData.duration_seconds}
                  onChange={(e) => setFormData({ ...formData, duration_seconds: parseInt(e.target.value) || 0 })}
                  placeholder="0"
                />
              </div>

APRÃˆS:
              <div>
                <Label>DurÃ©e (secondes) {formData.source_type === 'upload' && '- DÃ©tection automatique'}</Label>
                <Input
                  type="number"
                  value={formData.duration_seconds}
                  onChange={(e) => setFormData({ ...formData, duration_seconds: parseInt(e.target.value) || 0 })}
                  placeholder="0"
                />
                <p className="text-xs text-muted-foreground mt-1">
                  {formData.source_type === 'upload'
                    ? 'La durÃ©e est dÃ©tectÃ©e automatiquement lors de la sÃ©lection du fichier. Vous pouvez la modifier si nÃ©cessaire.'
                    : 'Entrez la durÃ©e manuellement ou utilisez l\'import automatique pour YouTube/Vimeo.'}
                </p>
              </div>

CHANGEMENTS:
  1. Label enrichi avec condition "- DÃ©tection automatique"
  2. Ajout info-bulle explicative (p tag)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  RÃ‰SUMÃ‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FICHIERS MODIFIÃ‰S: 2
LIGNES MODIFIÃ‰ES: 5 zones
LIGNES AJOUTÃ‰ES: ~50 lignes (fonction + dÃ©tection + info-bulle)

IMPACT:
  âœ… WhatsApp toujours visible (z-index corrigÃ©)
  âœ… DurÃ©e vidÃ©o auto-dÃ©tectÃ©e avec Promise
  âœ… UX amÃ©liorÃ©e avec toasts et info-bulles


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
